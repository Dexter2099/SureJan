<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>{{ community.title }}</title>
</head>
<body>
<header><a href="/">SureJan</a></header>
<div class="page">
    <h1>{{ community.title }}</h1>
    {% for post in posts %}
    <div class="postrow">
        <div class="votes">
            <button hx-post="{% url 'vote_post' post.id %}"
                    hx-vals='{"v": 1}'
                    hx-target="#post-score-{{ post.id }}"
                    hx-swap="outerHTML">▲</button>
            <button hx-post="{% url 'vote_post' post.id %}"
                    hx-vals='{"v": -1}'
                    hx-target="#post-score-{{ post.id }}"
                    hx-swap="outerHTML">▼</button>
        </div>
        {% if post.media and post.media.thumb %}
        <a href="{% url 'post_detail' post.id %}"><img src="{{ post.media.thumb.url }}" alt=""></a>
        {% endif %}
        <div>
            <a href="{% url 'post_detail' post.id %}">{{ post.title }}</a>
            <div class="meta">
                <a href="{% url 'community' post.community.name %}">{{ post.community.title }}</a>
                · {{ post.author.username }}
                · {{ post.created_at|timesince }} ago
                · <span id="post-score-{{ post.id }}">{{ post.score }}</span>
            </div>
        </div>
    </div>
    {% empty %}
    <p>No posts yet.</p>
    {% endfor %}
</div>
</body>
</html>
